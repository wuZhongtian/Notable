## 使用教学：

- # 在终端中输入连接命令`ssh root@8.142.208.202`  （公网ip）
- 输入开机密码，密码自动隐藏，输入时不显示
- ![image-20211101133312791](C:\Users\wzt\AppData\Roaming\Typora\typora-user-images\image-20211101133312791.png)



- 使用 linux命令 / vim命令 操作系统

### 宝塔面板

- 安装：`yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh`

- 查看公网登录地址 `bt default`
  - 外网面板地址: http://8.142.208.202:8888/a3e99629
    内网面板地址: http://172.18.218.46:8888/a3e99629
    *以下仅为初始默认账户密码，若无法登录请执行bt命令重置账户/密码登录
    username: egfb9ast
    password: 993cc855

### ssh登录报错

- 原因：第一次SSH连接时，生成的认证储存在客户端（也就是用SSH连线其他电脑的那个，自己操作的那个）中的known_hosts，
- 但是如果服务器验证过了，认证资讯当然也会更改，服务器端与客户端不同时，就会跳出错误
- 因此，只要把电脑中的认证资讯删除，连线时重新生成，就一切完美啦～要删除很简单，
- 只要在客户端输入一个指令`ssh-keygen -R 服务器ip地址`

```sh
PS C:\Users\wzt> ssh root@8.142.208.202
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the ED25519 key sent by the remote host is
SHA256:/y9BDVH04wKb/ouMYigQuyAuyn5yCnxLAQ/S6xMpTB8.
Please contact your system administrator.
Add correct host key in C:\\Users\\wzt/.ssh/known_hosts to get rid of this message.
Offending ECDSA key in C:\\Users\\wzt/.ssh/known_hosts:3
Host key for 8.142.208.202 has changed and you have requested strict checking.
Host key verification failed.
```







### 开放服务器端口

- 配置安全组规则，打开对应端口，否则无法使用
  - 远程连接实例所需的22、3389端口在创建安全组时默认为开启状态
  - 您需要确认安全组的入方向已开放这些端口。如果未开放，请手动配置
- mysql 数据库端口：3306

![image-20211102103523791](C:\Users\wzt\AppData\Roaming\Typora\typora-user-images\image-20211102103523791.png)

![image-20211102103547637](C:\Users\wzt\AppData\Roaming\Typora\typora-user-images\image-20211102103547637.png)







### 断开ssh连接后继续运行程序

- 使用screen运行
  - 安装命令执行任务 CentOS`yum install screen`
  - 创建screen窗口        `screen -S name`       //name用于标注screen窗口的用途,自由命名
  - 执行 screen -S name 之后系统会跳进一个新窗口，我们创建的新进程来执行
  - 在这里面启动程序即可
  - 离开screen窗口并保留程序在后台运行 `ctrl + a + d`
  - 查看screen进程          `screen -ls`
  - 进入进程     
    - 仅有一个进程时：   `screen  -r -d`
    - 当有多个进程：        `screen  -r -d pid`   //pid是进程的编号
    - ![image-20211102003012432](C:\Users\wzt\AppData\Roaming\Typora\typora-user-images\image-20211102003012432.png)
  - 在窗口中`ctrl + a`再按下 d 键，就可以退出ssh登录，实现后台运行！
  - 删除进程`screen -S PID -X quit`   //PID是进程号

- 使用nohup执行
- 使用管理终端执行







### 将本地与服务器的文件传输

- linux的根目录  `/`
- 管理员用户的位置   `/root`   相当于`~`



#### 使用scp命令

- 需要提供服务服务器的开机密码

##### 本机--服务器

- 把本机的文件传给目标服务器
  - `scp 本机文件路径 root@192.168.1.147:服务器目标路径`        //ip地址为目标服务器地址
- 把本机的文件夹传给目标服务器
  - `scp -r 本机文件夹路径 root@192.168.1.145:服务器目标路径`



##### 服务器---本机

- 把远端服务器文件拷贝到本地
- `scp root@192.168.1.147:服务器的文件路径  本地文件存放路径`    //ip地址为目标服务器地址    







## 当前状态

- 配置`node.js`环境 
  - 使用二进制文件安装。
  - 下载文件`wget https://nodejs.org/dist/v6.9.5/node-v6.9.5-linux-x64.tar.xz`
  - 解压之后，在bin文件夹中就已存在node和npm，无需重复编译。
  - 解压文件`tar xvf node-v6.9.5-linux-x64.tar.xz`
  - 创建软链接，您就可以在任意目录下直接使用node和npm命令。
  - `ln -s /root/node-v6.9.5-linux-x64/bin/node /usr/local/bin/node
    ln -s /root/node-v6.9.5-linux-x64/bin/npm /usr/local/bin/npm`
  
- 安装git工具
  - `yum -y install git` 安装git
  
- 安装mysql
  
  - 具体步骤看阿里云服务器官网
  
- 安装MongoDB数据库（教程：[Linux系统安装MongoDB数据库](https://blog.csdn.net/cnds123321/article/details/121596298)）
  
  - 从官网下载安装包 并上传到服务器
  - `tar -zxvf mongodb-linux-x86_64-rhel70-5.0.4.tgz`对压缩包进行解压
  - 将解压后的文件移动到指定目录下`mv mongodb-linux-x86_64-rhel70-5.0.4 /usr/local/mongodb5`
  - MongoDB 的可执行文件位于 bin 目录下，所以可以将其添加到 环境变量**PATH**路径中：`export PATH=/usr/local/mongodb5/bin:$PATH`，其中`/usr/local/mongodb5/bin`表示mongodb可执行文件的绝对路径。
  - 执行`mongo --version`命令查看mongodb版本如果成功表示配置成功。
  - 创建配置文件
    - 创建数据库文件夹，在mongodb的安装目录下创建`data/db`文件夹，这里`/usr/local/mongodb5`就是我系统上的安装目录。
    - 创建日志文件，在mongodb的安装目录下创建`logs`文件夹。
    - 创建配置文件夹，在mongodb的安装目录下创建`etc`文件。
    - 创建配置文件，在上一步创建的`etc`目录下使用`vi mongodb.conf`命令创建配置文件，并且写入如下内容
  
  ```sh
  # 数据存储路径
  dbpath=/usr/local/mongodb5/data/db
  # 日志文件路径
  logpath=/usr/local/mongodb5/logs/mongodb.log
  # 端口号
  port=27017
  fork=true
  journal=false
  storageEngine=wiredTiger
  ```
  
- 启动mongodb

  - cd到mongodb目录下的bin文件夹，执行如下命令：`./mongod --config /usr/local/mongodb5/etc/mongodb.conf`
  - 启动后，在任意目录下输入`mongo`命令就可以使用mongodb数据库了。

- 后续使用：参看《node.js入门教程》24页

- admin

  - 用户名：'root'   密码：'123456'   权限：root





